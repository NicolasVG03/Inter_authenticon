@page "/dashboard/{Id:int}/Orders"
@inject HttpClient Http
@inject NavigationManager Navigation

<div class="modal fade" id="modal-contato" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog ModalProductsOrder modal-dialog-centered modal-dialog-scrollable" role="document">
        <div class="modal-content">

            <div class="modal-header Line">
                <div class="frame-208">
                    <div class="frame-207">
                        <div class="frame-205">
                            <div class="dados-do-pedido">Dados do pedido</div>
                        </div>
                        <div class="frame-206">
                            <button class="buttonsOrder">
                                <img class="frame-206-item" src="Imagens/icon_Check.png" alt="check" />
                            </button>
                            <button class="buttonsOrder">
                                <img class="frame-206-item" src="Imagens/icon_Cancel.png" alt="x" />
                            </button>
                        </div>
                    </div>
                </div>


            </div>


            <div class="modal-body">

                <div class="frame-20">
                    <div class="rectangle-32"></div>
                    <div class="frame-201">
                        <div class="camisa-scorpion inter-bold-woodsmoke-18px">Camisa Scorpion</div>
                        <div class="frame-200">
                            <div class="frame-199">
                                <div class="cor-preto inter-normal-woodsmoke-16px">
                                    <span class=" inter-normal-woodsmoke-16px">cor: </span><span
                                        class=" inter-bold-woodsmoke-16px">preto</span>
                                </div>
                                <div class="quantidade-02 inter-normal-woodsmoke-16px">
                                    <span class=" inter-normal-woodsmoke-16px">quantidade: </span><span
                                        class=" inter-bold-woodsmoke-16px">02</span>
                                </div>
                                <div class="valor-unitrio-r-1 inter-normal-woodsmoke-16px">
                                    <span class=" inter-normal-woodsmoke-16px">valor unitário: </span><span
                                        class=" inter-bold-woodsmoke-16px">R$ 189,99</span>
                                </div>
                            </div>
                            <div class="frame-193">
                                <div class="valor-total inter-normal-woodsmoke-16px">valor total:</div>
                                <div class="price inter-bold-woodsmoke-16px">R$ 379,98</div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="frame-20">
                    <div class="rectangle-32"></div>
                    <div class="frame-201">
                        <div class="camisa-scorpion inter-bold-woodsmoke-18px">Camisa Scorpion</div>
                        <div class="frame-200">
                            <div class="frame-199">
                                <div class="cor-preto inter-normal-woodsmoke-16px">
                                    <span class=" inter-normal-woodsmoke-16px">cor: </span><span
                                        class=" inter-bold-woodsmoke-16px">preto</span>
                                </div>
                                <div class="quantidade-02 inter-normal-woodsmoke-16px">
                                    <span class=" inter-normal-woodsmoke-16px">quantidade: </span><span
                                        class=" inter-bold-woodsmoke-16px">02</span>
                                </div>
                                <div class="valor-unitrio-r-1 inter-normal-woodsmoke-16px">
                                    <span class=" inter-normal-woodsmoke-16px">valor unitário: </span><span
                                        class=" inter-bold-woodsmoke-16px">R$ 189,99</span>
                                </div>
                            </div>
                            <div class="frame-193">
                                <div class="valor-total inter-normal-woodsmoke-16px">valor total:</div>
                                <div class="price inter-bold-woodsmoke-16px">R$ 379,98</div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="frame-209">
                    <div class="frame-204">
                        <div class="frame-204-item inter-bold-woodsmoke-18px">Total do pedido:</div>
                        <div class="frame-204-item inter-bold-woodsmoke-18px">R$ 544,57</div>
                    </div>
                </div>


            </div>


            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                @* <button type="button" class="btn btn-primary">Save changes</button> *@
            </div>
        </div>
    </div>
</div>

<div class="div_Header">
    <div class="div_ProductIHeader center">
        <a href="/">
            <div class="Logo LogoHome">
                <span class="span_authentic">authentic</span><span class="span_on">on</span>
            </div>
        </a>
    </div>
</div>

<div class="configuracoes-da-conta-enderecoscreen">
    <div class="Menu">
        <div class="rectangle-20-MqCXpt"></div>
        <div class="voltar-MqCXpt inter-bold-woodsmoke-20px">&lt; voltar</div>

        <a href="/dashboard/@Id/Sales">
            <div class="frame-166-MqCXpt">
                <img class="maps-SWa9AO" src="Imagens/icon_Sales.png" alt="Maps" />
                <div class="minha-conta-chL6k6 inter-semi-bold-woodsmoke-24px">Vendas</div>
            </div>
        </a>
        <a href="/dashboard/@Id/Orders">
            <div class="frame-165-MqCXpt">
                <img class="maps-SWa9AO" src="Imagens/icon_Orders.png" alt="Maps" />
                <div class="pedidos-Wap3gW inter-semi-bold-woodsmoke-24px">Pedidos</div>
            </div>
        </a>
        <a href="/dashboard/@Id/Products">
            <div class="frame-164-MqCXpt">
                <img class="bags-Wap3gW" src="Imagens/icon_Products.png" alt="Bags" />
                <div class="pedidos-Wap3gW inter-semi-bold-woodsmoke-24px">Produtos</div>
            </div>
        </a>

        @if (administrator != null)
        {
            <div class="nicolas-MqCXpt">@administrator.Name</div>
            <img class=" ellipse-3-MqCXpt Profile"
            src="https://ui-avatars.com/api/?name=@administrator.Name&background=0185FF&color=FCFCFC&font-size=0.5&&?size=270"
            alt="log-in" />
        }
    </div>
    <div class="endereos-MqCXpt">Pedidos</div>
    <div class="adicione-ou-remova-endereos-rapidamente-MqCXpt">Aqui você encontra todos os pedidos, podendo confirmar,
        excluir e visualizar cada um.</div>

    <div class="frame-146-MqCXpt background">
        @foreach (var order in orders)
        {
            <div class="headerorder-xXpAQP">
                <div class="frame-156-MzCI4w">
                    <div class="frame-155-w8xfty">
                        <div class="frame-153-UQCwGm">
                            <div class="frame-149-CFclLN">
                                <div class="pedido-lzpZVW inter-bold-woodsmoke-16px">Pedido</div>
                                <div class="pedido0003-lzpZVW inter-medium-woodsmoke-16px">#Pedido000 @order.OrderID</div>
                            </div>
                            <div class="frame-150-CFclLN">
                                <div class="data-do-pedido-z4Aq53 inter-bold-woodsmoke-16px">Data do pedido</div>
                                <div class="x12112022-z4Aq53 inter-medium-woodsmoke-16px">@order.OrderDate</div>
                            </div>
                        </div>
                        <div class="frame-154-UQCwGm">
                            <div class="frame-151-Vc8dpm">
                                <div class="status-do-pedido-hhCxFn inter-bold-woodsmoke-16px">Status do pedido</div>

                                @if (order.Status == 0)
                                {
                                    <div class="em-processo-hhCxFn">Em processo</div>
                                }
                                else if (order.Status == 1)
                                {
                                    <div class="em-processo-hhCxFn">Concluido</div>
                                }
                                else
                                {
                                    <div class="em-processo-hhCxFn">Cancelado</div>
                                }

                            </div>

                        </div>
                    </div>
                    <button type="button" class="btn btn-primary btnOrdersDashboard" data-toggle="modal"
                    data-target="#modal-contato">
                        <img class="polygon-3-w8xfty" src="Imagens/icon_DownArrow.png" alt="Polygon 3" />
                    </button>
                </div>
            </div>
        }
    </div>
</div>
@code {
    [Parameter]
    public int Id { get; set; }


    public Administrator? administrator { get; set; } = null!;

    public List<Order>? orders { get; set; } = null!;

    protected override async Task OnInitializedAsync()
    {

        administrator = await Http.GetFromJsonAsync<Administrator>($"administrator/?id={Id}");
        orders = await Http.GetFromJsonAsync<List<Order>?>("Order");

        if (administrator != null)
        {
            int id = administrator.UserID;

            Console.WriteLine(id);

        }

    }

    public class Administrator
    {
        public int UserID { get; set; }

        public string? Name { get; set; }

        public string Email { get; set; } = null!;

        public int Status { get; set; }

        public string Password { get; set; } = null!;

    }

    public class Order
    {
        public int OrderID { get; set; }

        public DateTime OrderDate { get; set; }

        public decimal Freight { get; set; }

        public decimal TotalPriceOrder { get; set; }

        public int Status { get; set; }

    }

}